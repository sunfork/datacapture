<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>datacapture - nuthsell</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="modal fade" id="modal-account" role="dialog" aria-labelledby="addUserLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <div id="accountAlert"></div>
            <form class="form-horizontal" role="form">

              <div class="jumbotron"><h2><img style="height: 100px; margin-top: -15px;" src="images/prestige.png"><small> login for more</small></h2></div>
              <div class="form-group">
                <label for="email" class="col-sm-2 control-label">account</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control" id="email" placeholder="email address" />
                </div>
              </div>
              <div class="form-group">
                <label for="password" class="col-sm-2 control-label">password</label>
                <div class="col-sm-10">
                  <input type="password" class="form-control" id="password" placeholder="****************" />
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-6">
                  <button type="button" class="btn btn-default btn-lg pull-right sign-up">sign up</button>
                </div>
                <div class="col-sm-6">
                  <button type="button" class="btn btn-primary btn-lg login">login</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modal-search" role="dialog" aria-labelledby="addUserLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <div id="accountAlert"></div>
            <form class="form-horizontal" role="form">
              <div class="jumbotron"><h2><small>find everything</small></h2></div>
              <div class="form-group">
                <div class="col-sm-12">
                  <input type="text" class="form-control" id="search" placeholder="search for users, templates and tasks" />
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-12">
                  <button type="button" class="btn btn-primary btn-lg search">search</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

    </div>

    <div class="modal fade" id="modal-add-user" role="dialog" aria-labelledby="addUserLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title" id="addUserLabel">
              add user
            </h4>
          </div>
          <div class="modal-body">
            <div id="interviewAlert"></div>
            <form class="form-horizontal" role="form">
              <div class="form-group">
                <label for="fullName" class="col-sm-2 control-label">full name</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control" id="fullName" placeholder="user's full name" />
                </div>
              </div>
              <div class="form-group">
                <label for="roles" class="col-sm-2 control-label">roles</label>
                <div class="col-sm-10">
                  <ul class="list-group checked-list-box" id="roles">
                    <li class="list-group-item">administrator</li>
                    <li class="list-group-item">template author</li>
                    <li class="list-group-item">task initiator</li>
                    <li class="list-group-item">team lead</li>
                    <li class="list-group-item">worker</li>
                  </ul>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
             <button type="button" class="btn btn-default" data-dismiss="modal">close</button> <button type="button" class="btn btn-primary submit-user">submit</button>
          </div>
        </div>    
      </div>
    </div>

    <div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="/index.html">users</a></li>
          <li><a href="/devices.html">devices</a></li>
          <li><a href="/templates.html">templates</a></li>
          <li><a href="/tasks.html">tasks</a></li>
          <li><a href="#" class="search"><span class="glyphicon glyphicon-search"></span></a></li>
          <li>&nbsp;</li>
          <li><a href="#" class="account"><span class="glyphicon glyphicon-user"></span></a></li>
        </ul>
        <h3 class="text-muted"><img style="height: 60px; margin-top: -15px;" src="images/prestige.png"></h3>
      </div>

      <div class="jumbotron">
        <h2>user management</h2>
        <p class="lead">keep your workers on track...</p>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <button class="btn btn-primary pull-right add-user"><span class="glyphicon glyphicon-plus"></span> add user</button>
          <h4>active users</h4>
          <table class="table table-striped table-condensed">
            <thead>
              <tr>
                <th>
                  user
                </th>
                <th>
                  roles
                </th>
                <th>
                  tasks processed
                </th>
                <th>
                  outstanding tasks
                </th>
              </tr>
            </thead>
            <tbody class="users"></tbody>
          </table>
        </div>
      </div>

      <div class="footer">
        <p class="pull-right nutshell"><strong>nut</strong>shell <span class="glyphicon glyphicon-ok"></span></p>
      </div>

    </div>


    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>

        <!-- build:js(.) scripts/plugins.js -->
        <script src="bower_components/bootstrap/js/affix.js"></script>
        <script src="bower_components/bootstrap/js/alert.js"></script>
        <script src="bower_components/bootstrap/js/dropdown.js"></script>
        <script src="bower_components/bootstrap/js/tooltip.js"></script>
        <script src="bower_components/bootstrap/js/modal.js"></script>
        <script src="bower_components/bootstrap/js/transition.js"></script>
        <script src="bower_components/bootstrap/js/button.js"></script>
        <script src="bower_components/bootstrap/js/popover.js"></script>
        <script src="bower_components/bootstrap/js/carousel.js"></script>
        <script src="bower_components/bootstrap/js/scrollspy.js"></script>
        <script src="bower_components/bootstrap/js/collapse.js"></script>
        <script src="bower_components/bootstrap/js/tab.js"></script>
        <!-- endbuild -->

        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script>

        function showAlert(message, $target, options) {
          var options = {
            duration: (options.duration || 1000),
            type: options.type || 'success' //success, info, warning, or danger
          };

          options.duration = (options.duration > 300000 ? 300000 : options.duration);

          var alertHtml = '<div class="alert alert-' + options.type + ' alert-dismissable">';
          alertHtml += '<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>';
          alertHtml += '<strong>' + message + '</strong>';
          alertHtml += '</div>';

          if (options.duration !== 0) {
            $target.fadeOut(options.duration, function() {
              $target.empty();
            });
          }

          $target.html(alertHtml).fadeIn(200);
        }

        var users = { user: [
          {
            ref: 'abc1',
            name: 'Joyce Mathevula',
            roles: ['worker'],
            tasksProcessed: 88,
            tasksOutstanding: 6
          },
          {
            ref: 'abc2',
            name: 'Denver Mlilo',
            roles: ['worker'],
            tasksProcessed: 13,
            tasksOutstanding: 34
          },
          {
            ref: 'abc3',
            name: 'Neville Dlamini',
            roles: ['template author', 'worker'],
            tasksProcessed: 91,
            tasksOutstanding: 4
          }]
        };

        function populateUserInfo(user) {
          //
        }

        function renderUsers() {
          $('.users').empty();

          users.user.forEach(function(user) {

            var isDanger = user.tasksOutstanding > 10;
            var $row = $('<tr class="user"><td><a href="#' + user.ref + '"><span class="glyphicon glyphicon-user"></span> ' + user.name + '<a></td><td>' + user.roles.join(', ') + '</td><td>' + user.tasksProcessed + '</td><td' + (isDanger ? ' class="FYI"' : '') + '>' + user.tasksOutstanding + '</td></tr>');

            if (isDanger) {
              $row.addClass('danger');
            }

            $('.users').append($row);
          });

          $('.user').find('a').click(function (evt) {
            var $this = $(this);
            var roles = $this.parent().find('td');

            evt.preventDefault();
            
            populateUserInfo()
            $('#modal-add-user').modal('show');
          });
        }

        $(document).ready(function() {
          $('.add-user').click(function() {
            $('#modal-add-user').modal('show');
          });

          $('.account').click(function() {
            $('#modal-account').modal('show');
          });

          $('.search').click(function() {
            $('#modal-search').modal('show');
          });

          renderUsers();

          $('.submit-user').click(function() {

            var fullName = $('#fullName').val();
            var roles = '';

            $("#check-list-box li.active").each(function(idx, li) {
                console.log($(li).text());
            });

            $('#roles').children().each(function(ctr, item) {
              
              var $item = $(item);
              console.log(ctr, $item.data('checked'), $item.is(':checked'), $item.prop('checked'));
              if (($item.data('checked') || false)) {
                roles += $item.text() + ', ';
              }
            });

            console.log(roles);

            // each(function(ctr, item) {
            //   var  = $(item).data('checked') || false;
            //   console.log(x);
            // });
            //if ()

            showAlert('enter valid', $('#interviewAlert'), { style: 'danger' });
            //alert('saving');
          })





          //make checklist
          $('.list-group.checked-list-box .list-group-item').each(function () {
            // Settings
            var $widget = $(this);
            var $checkbox = $('<input type="checkbox" class="hidden" />');
            var color = ($widget.data('color') ? $widget.data('color') : 'primary');
            var style = ($widget.data('style') == 'button' ? 'btn-' : 'list-group-item-');
            var settings = {
                on: {
                    icon: 'glyphicon glyphicon-check'
                },
                off: {
                    icon: 'glyphicon glyphicon-unchecked'
                }
            };
                
            $widget.css('cursor', 'pointer')
            $widget.append($checkbox);

            // Event Handlers
            $widget.on('click', function () {
              $checkbox.prop('checked', !$checkbox.is(':checked'));
              $checkbox.triggerHandler('change');
              updateDisplay();
            });
            $checkbox.on('change', function () {
              updateDisplay();
            });
            // Actions
            function updateDisplay() {
              var isChecked = $checkbox.is(':checked');

              // Set the button's state
              $widget.data('state', (isChecked) ? "on" : "off");

              // Set the button's icon
              $widget.find('.state-icon')
                .removeClass()
                .addClass('state-icon ' + settings[$widget.data('state')].icon);

              // Update the button's color
              if (isChecked) {
                $widget.addClass(style + color + ' active');
              } else {
                $widget.removeClass(style + color + ' active');
              }
            }

            // Initialization
            function init() {
                
                if ($widget.data('checked') == true) {
                    $checkbox.prop('checked', !$checkbox.is(':checked'));
                }
                
                updateDisplay();

                // Inject the icon if applicable
                if ($widget.find('.state-icon').length == 0) {
                    $widget.prepend('<span class="state-icon ' + settings[$widget.data('state')].icon + '"></span>');
                }
            }
            init();
          });
        });
        
        </script>
        <!-- endbuild -->
</body>
</html>
